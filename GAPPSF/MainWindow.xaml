<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:p="clr-namespace:GAPPSF.Core"
        xmlns:l="clr-namespace:GAPPSF.Localization"
        xmlns:UIControls="clr-namespace:GAPPSF.UIControls" 
        x:Class="GAPPSF.MainWindow"
        IsEnabled="{Binding UIIsIdle, Source={x:Static p:ApplicationData.Instance}}"
        Title="{l:Translate MainWindowTitle}"
        Height="{Binding MainWindowHeight, Mode=TwoWay, Source={x:Static p:Settings.Default}}" 
        Width="{Binding MainWindowWidth, Mode=TwoWay, Source={x:Static p:Settings.Default}}"
        Left="{Binding MainWindowLeft, Mode=TwoWay, Source={x:Static p:Settings.Default}}"
        Top="{Binding MainWindowTop, Mode=TwoWay, Source={x:Static p:Settings.Default}}" Closing="Window_Closing">
    <Grid x:Name="layoutRoot">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0">
            <Menu>
                <MenuItem Header="{l:Translate File}">
                    <MenuItem Header="{l:Translate New}" Command="{Binding NewCommand}" />
                    <MenuItem Header="{l:Translate Open}" Command="{Binding OpenCommand}"/>
                    <MenuItem Header="{l:Translate Import}">
                        <MenuItem Header="GAPP Data Storage" Command="{Binding ImportGAPPCommand}" />
                    </MenuItem>
                </MenuItem>
                <MenuItem Header="{l:Translate Search}">
                    <MenuItem Header="{l:Translate QuickSearch}">
                        <MenuItem Header="{l:Translate Archived}" Command="{Binding SelectArchivedCommand}" />
                    </MenuItem>
                </MenuItem>
                <MenuItem Header="{l:Translate Action}">
                </MenuItem>
                <MenuItem Header="{l:Translate LiveAPI}">
                    <MenuItem Header="{l:Translate Authorize}" Command="{Binding LiveApiAuthorizeCommand}" />
                </MenuItem>
                <MenuItem Header="{l:Translate Language}">
                    <MenuItem Header="{l:Translate OriginalText}" Click="MenuItem_Click_2"  />
                    <MenuItem Header="{l:Translate English}" Click="MenuItem_Click_3">
                        <MenuItem.Icon>
                            <Image Source="/Resources/MainWindow/en.gif" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="{l:Translate German}" Click="MenuItem_Click_4">
                        <MenuItem.Icon>
                            <Image Source="/Resources/MainWindow/de.gif" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="{l:Translate French}" Click="MenuItem_Click_5">
                        <MenuItem.Icon>
                            <Image Source="/Resources/MainWindow/fr.gif" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="{l:Translate Dutch}" Click="MenuItem_Click_6">
                        <MenuItem.Icon>
                            <Image Source="/Resources/MainWindow/nl.gif" />
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
                <MenuItem Header="{l:Translate Window}">
                    <MenuItem Header="Cache list" Click="MenuItem_Click" />
                    <MenuItem Header="Geocache viewer" Click="MenuItem_Click_1" />
                    <MenuItem Header="Application info" Click="MenuItem_Click_10" />
                </MenuItem>
            </Menu>
            <ToolBarTray>
                <ToolBar>
                    <Button Command="{Binding NewCommand}">
                        <Image Source="/Resources/MainWindow/database_add.png"/>
                    </Button>
                    <Button Command="{Binding OpenCommand}">
                        <Image Source="/Resources/MainWindow/database.png"/>
                    </Button>
                </ToolBar>
            </ToolBarTray>
        </StackPanel>
        <Grid Grid.Row="1" x:Name="expandedView" Visibility="Collapsed">
            <UIControls:UIControlContainer x:Name="expandedPanelContent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
        </Grid>
        <Grid x:Name="normalView" Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Grid Grid.Column="0">
                <Expander ExpandDirection="Right" HorizontalAlignment="Left">
                    <Expander.Header>
                        <TextBlock Text="{Binding ElementName=leftPanelContent, Path=Text}">
                            <TextBlock.LayoutTransform>
                                <RotateTransform Angle="90"/>
                            </TextBlock.LayoutTransform>
                        </TextBlock>
                    </Expander.Header>
                    <Expander.Content>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="5"/>
                            </Grid.ColumnDefinitions>
                            <Grid Grid.Column="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                <UIControls:UIControlContainer x:Name="leftPanelContent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
                            </Grid>
                            <GridSplitter Grid.Column="1" Width="5" ResizeBehavior="PreviousAndCurrent" ResizeDirection="Columns"/>
                        </Grid>
                    </Expander.Content>
                </Expander>
            </Grid>
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid Grid.Row="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                    <UIControls:UIControlContainer x:Name="topPanelContent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
                </Grid>
                <Grid Grid.Row="1">
                    <Expander ExpandDirection="Up" VerticalAlignment="Top">
                        <Expander.Header>
                            <TextBlock>
                                <TextBlock.Text>
                                    <MultiBinding StringFormat="Left: {0},   Right: {1}">
                                        <Binding ElementName="bottomLeftPanelContent" Path="Text" />
                                        <Binding ElementName="bottomRightPanelContent" Path="Text" />
                                    </MultiBinding>
                                </TextBlock.Text>
                            </TextBlock>
                        </Expander.Header>
                        <Expander.Content>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*" MinHeight="10" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <GridSplitter Grid.Row="0" Height="10" ResizeDirection="Rows" ResizeBehavior="CurrentAndNext" HorizontalAlignment="Stretch" VerticalAlignment="Top"/>
                                <Grid Grid.Row="1">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="10" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <Grid Grid.Column="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                        <UIControls:UIControlContainer x:Name="bottomLeftPanelContent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
                                    </Grid>
                                    <GridSplitter Grid.Column="1" Width="10" ResizeBehavior="PreviousAndNext" ResizeDirection="Columns"/>
                                    <Grid Grid.Column="2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                        <UIControls:UIControlContainer x:Name="bottomRightPanelContent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
                                    </Grid>
                                </Grid>
                            </Grid>
                        </Expander.Content>
                    </Expander>
                </Grid>
            </Grid>
            <Grid Grid.Column="2">
                <Expander ExpandDirection="Left" HorizontalAlignment="Right">
                    <Expander.Header>
                        <TextBlock Text="{Binding ElementName=rightPanelContent, Path=Text}">
                            <TextBlock.LayoutTransform>
                                <RotateTransform Angle="90"/>
                            </TextBlock.LayoutTransform>
                        </TextBlock>
                    </Expander.Header>
                    <Expander.Content>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" MinWidth="10" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <GridSplitter Grid.Column="0" Width="10" ResizeDirection="Columns" ResizeBehavior="CurrentAndNext" />
                            <Grid Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                <UIControls:UIControlContainer x:Name="rightPanelContent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
                            </Grid>
                        </Grid>
                    </Expander.Content>
                </Expander>
            </Grid>
        </Grid>
        <Grid Grid.Row="2">
            <TextBlock Text="{Binding Source={x:Static p:ApplicationData.Instance}, Path=ActiveDatabase.Text}" />
        </Grid>
    </Grid>
</Window>
